import{_ as f,c as i,b as s,n as k,a as m,t as l,d as u,F as h,g as c,e as y,r as b,h as S,o as a}from"./index-C955rGbu.js";import{W as C}from"./WatchProvider-qSE-thdA.js";const L={name:"TVShowDetailView",components:{WatchProvider:C},data(){return{show:null,error:null,isLoading:!0}},computed:{backdropUrl(){var o;return(o=this.show)!=null&&o.backdrop_path?`https://image.tmdb.org/t/p/original${this.show.backdrop_path}`:null},posterUrl(){var o;return(o=this.show)!=null&&o.poster_path?`https://image.tmdb.org/t/p/w500${this.show.poster_path}`:"/placeholder.jpg"},firstAirYear(){var o;return(o=this.show)!=null&&o.first_air_date?new Date(this.show.first_air_date).getFullYear():""},mainCast(){var o,t,d;return((d=(t=(o=this.show)==null?void 0:o.credits)==null?void 0:t.cast)==null?void 0:d.slice(0,6))||[]},trailers(){var o,t;return((t=(o=this.show)==null?void 0:o.videos)==null?void 0:t.results.filter(d=>d.type==="Trailer").slice(0,2))||[]}},methods:{async fetchShow(){this.error=null,this.isLoading=!0;try{const o=this.$route.params.id;this.show=await S(o)}catch(o){console.error("Error fetching show details:",o),this.error="Failed to load show details. Please try again later."}finally{this.isLoading=!1}},formatDate(o){return o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""},startWatching(){const o=this.show.seasons.find(t=>t.season_number>0);o&&this.startWatchingSeason(o.season_number)},startWatchingSeason(o){this.$router.push(`/tv-show/${this.show.id}/season/${o}/episode/1`)},goToShow(o){this.$router.push(`/tv-show/${o}`)},addToWatchlist(){console.log("Adding to watchlist:",this.show.id)}},async created(){await this.fetchShow()},watch:{"$route.params.id":{handler(){this.fetchShow()}}}},W={key:0,class:"show-detail"},x={class:"content"},V={class:"show-info"},T={class:"poster"},D=["src","alt"],B={class:"details"},M={class:"meta"},A={class:"year"},F={class:"seasons"},N={class:"rating"},U={class:"genres"},j={class:"overview"},P={class:"cast"},E={class:"cast-list"},I=["src","alt"],Y={class:"cast-info"},Z={class:"name"},H={class:"character"},z={class:"actions"},q={class:"seasons-section"},G={class:"seasons-grid"},J=["src","alt"],K={class:"season-info"},O={class:"episode-count"},Q={class:"air-date"},R=["onClick"],X={key:0,class:"videos-section"},$={class:"videos-grid"},ss=["src"],ts={key:1,class:"similar-section"},es={class:"similar-grid"},os=["onClick"],rs=["src","alt"],is={key:1,class:"error-state"},as={key:2,class:"loading-state"};function ns(o,t,d,ls,r,n){var w,p,_;const g=b("WatchProvider");return r.show?(a(),i("div",W,[s("div",{class:"backdrop",style:k({backgroundImage:`url(${n.backdropUrl})`})},t[3]||(t[3]=[s("div",{class:"backdrop-overlay"},null,-1)]),4),s("div",x,[s("div",V,[s("div",T,[s("img",{src:n.posterUrl,alt:r.show.name},null,8,D)]),s("div",B,[s("h1",null,l(r.show.name),1),s("div",M,[s("span",A,l(n.firstAirYear),1),s("span",F,l(r.show.number_of_seasons)+" Seasons",1),s("span",N,[t[4]||(t[4]=s("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M12 17.27L18.18 21L16.54 13.97L22 9.24L14.81 8.63L12 2L9.19 8.63L2 9.24L7.46 13.97L5.82 21L12 17.27Z",fill:"currentColor"})],-1)),u(" "+l((w=r.show.vote_average)==null?void 0:w.toFixed(1)),1)])]),s("div",U,[(a(!0),i(h,null,c(r.show.genres,e=>(a(),i("span",{key:e.id,class:"genre-tag"},l(e.name),1))),128))]),s("p",j,l(r.show.overview),1),s("div",P,[t[5]||(t[5]=s("h3",null,"Cast",-1)),s("div",E,[(a(!0),i(h,null,c(n.mainCast,e=>(a(),i("div",{key:e.id,class:"cast-member"},[s("img",{src:e.profile_path?`https://image.tmdb.org/t/p/w185${e.profile_path}`:"/placeholder-avatar.jpg",alt:e.name},null,8,I),s("div",Y,[s("span",Z,l(e.name),1),s("span",H,l(e.character),1)])]))),128))])]),s("div",z,[s("button",{class:"btn-primary",onClick:t[0]||(t[0]=(...e)=>n.startWatching&&n.startWatching(...e))},t[6]||(t[6]=[s("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M8 5.14V19.14L19 12.14L8 5.14Z",fill:"currentColor"})],-1),u(" Watch Now ")])),s("button",{class:"btn-secondary",onClick:t[1]||(t[1]=(...e)=>n.addToWatchlist&&n.addToWatchlist(...e))},t[7]||(t[7]=[s("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M12 4V20M4 12H20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),u(" Add to Watchlist ")])),y(g,{"media-id":r.show.id,"media-type":"tv"},null,8,["media-id"])])])]),s("div",q,[t[9]||(t[9]=s("h2",null,"Seasons",-1)),s("div",G,[(a(!0),i(h,null,c(r.show.seasons,e=>(a(),i("div",{key:e.id,class:"season-card"},[s("img",{src:e.poster_path?`https://image.tmdb.org/t/p/w342${e.poster_path}`:"/placeholder.jpg",alt:`${r.show.name} Season ${e.season_number}`},null,8,J),s("div",K,[s("h3",null,"Season "+l(e.season_number),1),s("span",O,l(e.episode_count)+" Episodes",1),s("p",Q,l(n.formatDate(e.air_date)),1),s("button",{class:"btn-text",onClick:v=>n.startWatchingSeason(e.season_number)},t[8]||(t[8]=[u(" Watch Season "),s("i",{class:"arrow-icon"},"â†’",-1)]),8,R)])]))),128))])]),(p=r.show.videos)!=null&&p.results.length?(a(),i("div",X,[t[10]||(t[10]=s("h2",null,"Videos",-1)),s("div",$,[(a(!0),i(h,null,c(n.trailers,e=>(a(),i("div",{key:e.key,class:"video-card"},[s("iframe",{src:"https://www.youtube.com/embed/"+e.key,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,ss)]))),128))])])):m("",!0),(_=r.show.similar)!=null&&_.results.length?(a(),i("div",ts,[t[11]||(t[11]=s("h2",null,"Similar Shows",-1)),s("div",es,[(a(!0),i(h,null,c(r.show.similar.results.slice(0,6),e=>(a(),i("div",{key:e.id,class:"show-card",onClick:v=>n.goToShow(e.id)},[s("img",{src:e.poster_path?`https://image.tmdb.org/t/p/w342${e.poster_path}`:"/placeholder.jpg",alt:e.name},null,8,rs),s("h3",null,l(e.name),1)],8,os))),128))])])):m("",!0)])])):r.error?(a(),i("div",is,[t[12]||(t[12]=s("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:"currentColor","stroke-width":"2"}),s("path",{d:"M12 8V12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),s("path",{d:"M12 16H12.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)),s("p",null,l(r.error),1),s("button",{class:"btn-primary",onClick:t[2]||(t[2]=(...e)=>n.fetchShow&&n.fetchShow(...e))},"Try Again")])):(a(),i("div",as,t[13]||(t[13]=[s("div",{class:"loader"},null,-1),s("p",null,"Loading show details...",-1)])))}const cs=f(L,[["render",ns],["__scopeId","data-v-89570697"]]);export{cs as default};
